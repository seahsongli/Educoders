{"ast":null,"code":"import { InvalidSerializableTransactionError } from '../../errors/transaction.js';\nexport function getTransactionType(transaction) {\n  if (transaction.type) return transaction.type;\n  if (typeof transaction.authorizationList !== 'undefined') return 'eip7702';\n  if (typeof transaction.blobs !== 'undefined' || typeof transaction.blobVersionedHashes !== 'undefined' || typeof transaction.maxFeePerBlobGas !== 'undefined' || typeof transaction.sidecars !== 'undefined') return 'eip4844';\n  if (typeof transaction.maxFeePerGas !== 'undefined' || typeof transaction.maxPriorityFeePerGas !== 'undefined') {\n    return 'eip1559';\n  }\n  if (typeof transaction.gasPrice !== 'undefined') {\n    if (typeof transaction.accessList !== 'undefined') return 'eip2930';\n    return 'legacy';\n  }\n  throw new InvalidSerializableTransactionError({\n    transaction\n  });\n}","map":{"version":3,"names":["InvalidSerializableTransactionError","getTransactionType","transaction","type","authorizationList","blobs","blobVersionedHashes","maxFeePerBlobGas","sidecars","maxFeePerGas","maxPriorityFeePerGas","gasPrice","accessList"],"sources":["C:\\Users\\seahs\\repos\\worldcoin-app\\node_modules\\@worldcoin\\idkit-core\\node_modules\\viem\\utils\\transaction\\getTransactionType.ts"],"sourcesContent":["import {\n  InvalidSerializableTransactionError,\n  type InvalidSerializableTransactionErrorType,\n} from '../../errors/transaction.js'\nimport type { ErrorType } from '../../errors/utils.js'\nimport type {\n  FeeValuesEIP1559,\n  FeeValuesEIP4844,\n  FeeValuesLegacy,\n} from '../../index.js'\nimport type {\n  TransactionRequestEIP1559,\n  TransactionRequestEIP2930,\n  TransactionRequestEIP4844,\n  TransactionRequestEIP7702,\n  TransactionRequestGeneric,\n  TransactionRequestLegacy,\n  TransactionSerializableEIP1559,\n  TransactionSerializableEIP2930,\n  TransactionSerializableEIP4844,\n  TransactionSerializableEIP7702,\n  TransactionSerializableGeneric,\n  TransactionSerializableLegacy,\n} from '../../types/transaction.js'\nimport type {\n  Assign,\n  ExactPartial,\n  IsNever,\n  OneOf,\n  ValueOf,\n} from '../../types/utils.js'\n\nexport type GetTransactionType<\n  transaction extends OneOf<\n    TransactionSerializableGeneric | TransactionRequestGeneric\n  > = TransactionSerializableGeneric,\n  result =\n    | (transaction extends\n        | MatchKeys<TransactionSerializableLegacy, transaction>\n        | MatchKeys<TransactionRequestLegacy, transaction>\n        | LegacyProperties\n        ? 'legacy'\n        : never)\n    | (transaction extends\n        | MatchKeys<TransactionSerializableEIP1559, transaction>\n        | MatchKeys<TransactionRequestEIP1559, transaction>\n        | EIP1559Properties\n        ? 'eip1559'\n        : never)\n    | (transaction extends\n        | MatchKeys<TransactionSerializableEIP2930, transaction>\n        | MatchKeys<TransactionRequestEIP2930, transaction>\n        | EIP2930Properties\n        ? 'eip2930'\n        : never)\n    | (transaction extends\n        | MatchKeys<TransactionSerializableEIP4844, transaction>\n        | MatchKeys<TransactionRequestEIP4844, transaction>\n        | EIP4844Properties\n        ? 'eip4844'\n        : never)\n    | (transaction extends\n        | MatchKeys<TransactionSerializableEIP7702, transaction>\n        | MatchKeys<TransactionRequestEIP7702, transaction>\n        | EIP7702Properties\n        ? 'eip7702'\n        : never)\n    | (transaction['type'] extends TransactionSerializableGeneric['type']\n        ? Extract<transaction['type'], string>\n        : never),\n> = IsNever<keyof transaction> extends true\n  ? string\n  : IsNever<result> extends false\n    ? result\n    : string\n\nexport type GetTransactionTypeErrorType =\n  | InvalidSerializableTransactionErrorType\n  | ErrorType\n\nexport function getTransactionType<\n  const transaction extends OneOf<\n    TransactionSerializableGeneric | TransactionRequestGeneric\n  >,\n>(transaction: transaction): GetTransactionType<transaction> {\n  if (transaction.type)\n    return transaction.type as GetTransactionType<transaction>\n\n  if (typeof transaction.authorizationList !== 'undefined')\n    return 'eip7702' as any\n\n  if (\n    typeof transaction.blobs !== 'undefined' ||\n    typeof transaction.blobVersionedHashes !== 'undefined' ||\n    typeof transaction.maxFeePerBlobGas !== 'undefined' ||\n    typeof transaction.sidecars !== 'undefined'\n  )\n    return 'eip4844' as any\n\n  if (\n    typeof transaction.maxFeePerGas !== 'undefined' ||\n    typeof transaction.maxPriorityFeePerGas !== 'undefined'\n  ) {\n    return 'eip1559' as any\n  }\n\n  if (typeof transaction.gasPrice !== 'undefined') {\n    if (typeof transaction.accessList !== 'undefined') return 'eip2930' as any\n    return 'legacy' as any\n  }\n\n  throw new InvalidSerializableTransactionError({ transaction })\n}\n\n////////////////////////////////////////////////////////////////////////////////////////////\n// Types\n\ntype MatchKeys<T extends object, U extends object> = ValueOf<\n  Required<{\n    [K in keyof U]: K extends keyof T ? K : undefined\n  }>\n> extends string\n  ? T\n  : never\n\ntype BaseProperties = {\n  accessList?: undefined\n  authorizationList?: undefined\n  blobs?: undefined\n  blobVersionedHashes?: undefined\n  gasPrice?: undefined\n  maxFeePerBlobGas?: undefined\n  maxFeePerGas?: undefined\n  maxPriorityFeePerGas?: undefined\n  sidecars?: undefined\n}\n\ntype LegacyProperties = Assign<BaseProperties, FeeValuesLegacy>\ntype EIP1559Properties = Assign<\n  BaseProperties,\n  OneOf<\n    | {\n        maxFeePerGas: FeeValuesEIP1559['maxFeePerGas']\n      }\n    | {\n        maxPriorityFeePerGas: FeeValuesEIP1559['maxPriorityFeePerGas']\n      },\n    FeeValuesEIP1559\n  > & {\n    accessList?: TransactionSerializableEIP2930['accessList'] | undefined\n  }\n>\ntype EIP2930Properties = Assign<\n  BaseProperties,\n  ExactPartial<FeeValuesLegacy> & {\n    accessList: TransactionSerializableEIP2930['accessList']\n  }\n>\ntype EIP4844Properties = Assign<\n  BaseProperties,\n  ExactPartial<FeeValuesEIP4844> &\n    OneOf<\n      | {\n          blobs: TransactionSerializableEIP4844['blobs']\n        }\n      | {\n          blobVersionedHashes: TransactionSerializableEIP4844['blobVersionedHashes']\n        }\n      | {\n          sidecars: TransactionSerializableEIP4844['sidecars']\n        },\n      TransactionSerializableEIP4844\n    >\n>\ntype EIP7702Properties = Assign<\n  BaseProperties,\n  ExactPartial<FeeValuesEIP1559> & {\n    authorizationList: TransactionSerializableEIP7702['authorizationList']\n  }\n>\n"],"mappings":"AAAA,SACEA,mCAAmC,QAE9B,6BAA6B;AA6EpC,OAAM,SAAUC,kBAAkBA,CAIhCC,WAAwB;EACxB,IAAIA,WAAW,CAACC,IAAI,EAClB,OAAOD,WAAW,CAACC,IAAuC;EAE5D,IAAI,OAAOD,WAAW,CAACE,iBAAiB,KAAK,WAAW,EACtD,OAAO,SAAgB;EAEzB,IACE,OAAOF,WAAW,CAACG,KAAK,KAAK,WAAW,IACxC,OAAOH,WAAW,CAACI,mBAAmB,KAAK,WAAW,IACtD,OAAOJ,WAAW,CAACK,gBAAgB,KAAK,WAAW,IACnD,OAAOL,WAAW,CAACM,QAAQ,KAAK,WAAW,EAE3C,OAAO,SAAgB;EAEzB,IACE,OAAON,WAAW,CAACO,YAAY,KAAK,WAAW,IAC/C,OAAOP,WAAW,CAACQ,oBAAoB,KAAK,WAAW,EACvD;IACA,OAAO,SAAgB;EACzB;EAEA,IAAI,OAAOR,WAAW,CAACS,QAAQ,KAAK,WAAW,EAAE;IAC/C,IAAI,OAAOT,WAAW,CAACU,UAAU,KAAK,WAAW,EAAE,OAAO,SAAgB;IAC1E,OAAO,QAAe;EACxB;EAEA,MAAM,IAAIZ,mCAAmC,CAAC;IAAEE;EAAW,CAAE,CAAC;AAChE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}