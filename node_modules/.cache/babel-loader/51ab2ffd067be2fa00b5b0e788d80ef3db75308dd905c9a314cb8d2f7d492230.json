{"ast":null,"code":"import { hashToField } from \"../chunk-QN7JTJAQ.js\";\n\n// src/lib/backend.ts\nimport { isBrowser } from \"browser-or-node\";\nasync function verifyCloudProof(proof, app_id, action, signal, endpoint) {\n  if (isBrowser) {\n    throw new Error(\"verifyCloudProof can only be used in the backend.\");\n  }\n  const response = await fetch(endpoint ?? `https://developer.worldcoin.org/api/v2/verify/${app_id}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      ...proof,\n      action,\n      signal_hash: hashToField(signal ?? \"\").digest\n    })\n  });\n  if (response.ok) {\n    return {\n      success: true\n    };\n  } else {\n    return {\n      success: false,\n      ...(await response.json())\n    };\n  }\n}\nexport { verifyCloudProof };","map":{"version":3,"names":["hashToField","isBrowser","verifyCloudProof","proof","app_id","action","signal","endpoint","Error","response","fetch","method","headers","body","JSON","stringify","signal_hash","digest","ok","success","json"],"sources":["C:/Users/seahs/repos/worldcoin-app/node_modules/@worldcoin/idkit-core/build/lib/backend.js"],"sourcesContent":["import {\n  hashToField\n} from \"../chunk-QN7JTJAQ.js\";\n\n// src/lib/backend.ts\nimport { isBrowser } from \"browser-or-node\";\nasync function verifyCloudProof(proof, app_id, action, signal, endpoint) {\n  if (isBrowser) {\n    throw new Error(\"verifyCloudProof can only be used in the backend.\");\n  }\n  const response = await fetch(endpoint ?? `https://developer.worldcoin.org/api/v2/verify/${app_id}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      ...proof,\n      action,\n      signal_hash: hashToField(signal ?? \"\").digest\n    })\n  });\n  if (response.ok) {\n    return { success: true };\n  } else {\n    return { success: false, ...await response.json() };\n  }\n}\nexport {\n  verifyCloudProof\n};\n"],"mappings":"AAAA,SACEA,WAAW,QACN,sBAAsB;;AAE7B;AACA,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,eAAeC,gBAAgBA,CAACC,KAAK,EAAEC,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEC,QAAQ,EAAE;EACvE,IAAIN,SAAS,EAAE;IACb,MAAM,IAAIO,KAAK,CAAC,mDAAmD,CAAC;EACtE;EACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,QAAQ,IAAI,iDAAiDH,MAAM,EAAE,EAAE;IAClGO,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnB,GAAGZ,KAAK;MACRE,MAAM;MACNW,WAAW,EAAEhB,WAAW,CAACM,MAAM,IAAI,EAAE,CAAC,CAACW;IACzC,CAAC;EACH,CAAC,CAAC;EACF,IAAIR,QAAQ,CAACS,EAAE,EAAE;IACf,OAAO;MAAEC,OAAO,EAAE;IAAK,CAAC;EAC1B,CAAC,MAAM;IACL,OAAO;MAAEA,OAAO,EAAE,KAAK;MAAE,IAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;IAAC,CAAC;EACrD;AACF;AACA,SACElB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}